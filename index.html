
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Mustache :{</title>
  <meta name="author" content="Hyungsuk Hong">

  
  <meta name="description" content="octopress 에서는 한글 tags 와 한글제목을 지원하는가 궁금했습니다. 1
2
3
$ bundle exec rake new_post['한글이 되는가']
mkdir -p source/_posts
Creating new post: source/_posts/2017 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://aanoaa.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Mustache :{" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Mustache :{</a></h1>
  
    <h2>use perl</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:aanoaa.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/04/26/hangeuli-doeneunga/">한글이 되는가</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-04-26T22:46:10+09:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>octopress 에서는 한글 tags 와 한글제목을 지원하는가 궁금했습니다.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ bundle exec rake new_post['한글이 되는가']
</span><span class='line'>mkdir -p source/_posts
</span><span class='line'>Creating new post: source/_posts/2017-04-26-hangeuli-doeneunga.markdown</span></code></pre></td></tr></table></div></figure>


<p>이렇게 됩니다.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/06/08/yongbin-mode/">Yongbin-mode</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-06-08T00:22:00+09:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>외래어의 한글표기</h2>

<p>보통 외래서를 한글로 적을때, <code>e</code> 는 <code>ㅔ</code> 로, <code>a</code> 또는 <code>ae</code> 는 <code>ㅐ</code> 로
적습니다.</p>

<p>그런데 <a href="https://twitter.com/yongbin">@yongbin</a>님은 바꿔씁니다.
<code>helper</code> 를 한글로 적으면 보통은 <code>헬퍼</code>이지만 @yongbin 님은 <code>핼퍼</code>
입니다. 오래된 이야기입니다.</p>

<p>디랙토리, 핼퍼, 렌덤 등등..</p>

<p><code>생일</code>도 <code>셍일</code>로 적고, <code>요새</code>도 <code>요세</code> 적는걸 보면, 외래어만 그런 것 같진 않습니다.</p>

<h2>*-mode</h2>

<p>제 작은소원은 조국의 통일도 편경장의 팔모가지도 아닙니다.
제가 필요한 emacs의 mode 를 만드는 것입니다.
elisp 관련 책도 읽다가 포기한 적도 많습니다.</p>

<p>그런데 몇일 전
<a href="https://github.com/opencloset/monitor/issues/94#issuecomment-223536395">github-comment</a> 에서</p>

<blockquote><p>핼퍼에 구현된 코드중에</p></blockquote>

<p>라는 코멘트가 결정적인 계기가 되어서 <code>yongbin-mode</code> 를 만들어보자 라고
결심하게 되었습니다.</p>

<h3>yongbin-mode</h3>

<p>아이디어는 이랬습니다.</p>

<p>emacs 내에서 <code>ㅔ</code> 를 누르면 <code>ㅐ</code> 가 입력되고 <code>ㅐ</code>를 누르면 <code>ㅔ</code>가
입력되도록 하자.</p>

<p><code>pre-command-hook</code> 에서 스슥 하면 될 것 같았는데, multibyte 입력은
이벤트가 발생되지 않았습니다.</p>

<p>(아직도 왜 그런지 모르겠고, 어디서 무얼 찾아야 하는지도
모르겠습니다. elisp 도사님 찾아가서 제자 하고 싶음)</p>

<p>여튼 꼼수를 써서 익숙한 perl 로 프로그램을 만들고 emacs 에서는 호출만
하자 싶었습니다.</p>

<p>해서 <code>yb</code> 라는 perl 스크립트를 만들어서 <code>ㅐ</code>와 <code>ㅔ</code> 를 바꾸도록
하였습니다.</p>

<pre><code>$ echo "안녕하세요" | yb
안녕하새요
</code></pre>

<p>그리고 <code>yongbin-mode</code> 라는 minor mode 를 만들어서 채팅할때 알아서
변환되게 하고 싶었습니다.(저는 irc 채팅을 emacs 에서 합니다)</p>

<p>아무것도 몰라서(지금도 모름) 구글링하고 문서읽고 다른 코드들을 참고하면서</p>

<ul>
<li>yongbin-mode : 마이너 모드(yongbin-mode)를 켜고끈다</li>
<li>yongbinize-buffer : 현재버퍼의 텍스트를 용빈화시킨다</li>
<li>yongbinize-region(start, end) : 영역의 텍스트를 용빈화시킨다</li>
<li>yongbinize-line : 현재 라인을 용빈화 시킨다</li>
<li>erc-yongbinize : irc 의 입력을 용빈화 시킨다</li>
</ul>


<p>기능을 맨들었습니다.</p>

<p>그걸 여차저차 해서 irc 에서</p>

<pre><code>&lt;aanoaa&gt; '-']/ 안녕하세요&lt;RET&gt;
</code></pre>

<p>하면,</p>

<pre><code>&lt;aanoaa&gt; '-']/ 안녕하새요
</code></pre>

<p>로 됩니다.</p>

<p><a href="https://github.com/aanoaa/yongbin-mode">https://github.com/aanoaa/yongbin-mode</a></p>

<h2>느낀점</h2>

<p>개발환경이 넘 구립니다. 코드 변경하고 <code>M-x eval-buffer</code> 해서 다시 컴파일
하고 어디어디 찾아가서 <code>C-x C-e</code> 해서 한줄만 실행하고 등등..</p>

<p>뭘 모르는데 뭘 어떻게 해야할지가 젤 어렵고,
또 어떻게 디버깅 해야 할지가 어렵습니다.
괄호가 넘 많고 <code>if else</code> 문에 대한 문서를 봐도 어케 쓰는지 모르겠능;;
한글처리에 관한 문서는??</p>

<p>등등 어려움이 넘 많습니다.</p>

<p>하지만 context 가 오묘하달까?</p>

<pre><code>(with-current-buffer yongbinize-buffer-name
  (goto-char (point-min))
  (setq yongbinized-text (...)))
</code></pre>

<p>이런거?</p>

<p><code>point-min</code> 이라는걸 buffer 마다 가지고 있는 모양인데, 그게 context 에 따라
선택된다는게 참 신통방통</p>

<p>perl 뉴비 시절에 perl-kr 커뮤니티에서 도움을 많이 받았던게 넘 좋았는데,
elisp 는 한국사용자 커뮤니티가 없는 것 같습니다(?)
한글문서도 오래되었거나 거의 없는 것 같고..
closure 는 있는데 이건 elisp 가 아니고..</p>

<p>elisp 에 관심있는 emacs 사용자들에게서 뭔가 도움을 구해보고 싶습니다.
관련된 커뮤니티를 알고 계시면 알려주세요.</p>

<h2>레알 결론</h2>

<p><code>ㅔ</code> 와 <code>ㅐ</code> 가 바뀐게 보이면 너무 꼴보기 싫었습니다.
이제 몇주동안 저도 똑같이 바꿔쓰면서 고통을 주도록 하겠습니다.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/15/redis-path-and-db-number/">Redis Path and Db Number</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-07-15T18:10:25+09:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><code>redis://localhost:6397/1</code> 흔한 redis-url 입니다.
<code>/1</code> 의 역할은 뭘까요? 뭐냐면 Database number 입니다.</p>

<pre><code>$ redis-cli --help
redis-cli 3.0.2

Usage: redis-cli [OPTIONS] [cmd [arg [arg ...]]]
  ...
  -n &lt;db&gt;            Database number.
  ...
</code></pre>

<p><code>/1</code> 없이 연결하면 기본으로 <code>0</code> 번 database 를 사용합니다.</p>

<p>디버그 하면서 값을 확인하려고 제아무리 <code>keys *</code> 을 찍어도 암것도
안나와서 넘 답답했는데..</p>

<pre><code>127.0.0.1:6379&gt; keys *
(empty list or set)
</code></pre>

<p><code>select</code> 명령으로 선택해주거나,</p>

<pre><code>127.0.0.1:6379&gt; select 1
OK
127.0.0.1:6379[1]&gt; keys *
1) "user:aanoaa"
2) "users"
</code></pre>

<p><code>redis-cli</code> 에서 <code>-n</code> 옵션을 사용하거나</p>

<pre><code>$ redis-cli -n 1
127.0.0.1:6379[1]&gt; 
</code></pre>

<p>redis-url path 로 졸 검색했는데 암것도 안나옴.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/15/perltidy-profile-option/">Perltidy Profile Option</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-07-15T16:31:41+09:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><pre><code>$ perldoc perltidy

...
-pro=filename or --profile=filename
    To simplify testing and switching .perltidyrc files, this command
    may be used to specify a configuration file which will override the
    default name of .perltidyrc. There must not be a space on either
    side of the '=' sign. For example, the line

       perltidy -pro=testcfg

    would cause file testcfg to be used instead of the default
    .perltidyrc.

    A pathname begins with three dots, e.g. ".../.perltidyrc", indicates
    that the file should be searched for starting in the current
    directory and working upwards. This makes it easier to have multiple
    projects each with their own .perltidyrc in their root directories.
...
</code></pre>

<p>여기서 중요한것은 <code>...</code> 으로 시작하면 현재 디렉토리에서부터 위로
올라가면서 이름으로 프로파일을 찾는다는 것</p>

<p>global 설정은 <code>$HOME/.perltidyrc</code> 로 두고 각 프로젝트 root 마다
<code>.perltidyrc</code> 파일을 두면 신경쓰지 않고 사용할 수 있다는 겁니다.</p>

<p>굳</p>

<p>alias 걸어두고 사용하면 편리하겠습니다.
emacs 를 사용하는 인간이라면 <code>perltidy-mode</code> 의 <code>perltidy-bin</code> 을
수정해주면 되겠습니다.</p>

<p>선조들은 훌륭합니다.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/14/octopress-3-dot-0/">Octopress 3.0</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-07-14T15:51:02+09:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>블로그에 글을 1년 넘게 안썻더니 어케 쓰는줄 모르겠음.
하는김에 octopress 도 업그레이드</p>

<p>이제 <code>gh-pages</code> 브랜치 아니어도 되는건가..</p>

<p>아 몰랑</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/12/keep-simple-dist-dot-ini/">Keep Simple dist.ini</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-12T17:20:06+09:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://search.cpan.org/~rjbs/Dist-Zilla/lib/Dist/Zilla.pm">Dist::Zilla</a>
는 매우 편리한 배포도구 입니다.</p>

<p>기능이 넘 많아서 잘 모르고 써왔는데, 이게 뭔지도 모르는걸 쓰다보니
헛갈려서 요새는 레알 간단하게만 쓰고 있습니다.</p>

<p>갠적으로 딱 필요한 메타파일은 이거 3개 입니다.</p>

<ul>
<li>dist.ini</li>
<li>MANIFEST.SKIP</li>
<li>cpanfile</li>
</ul>


<p><code>cpanfile</code> 이 없을적에는 <code>Makefile.PL</code> 로 부터 의존성문제를 해결했기
때문에 복잡했는데 이제는 <code>cpanm --installdeps .</code> 덕분에 몹.시.편.리.</p>

<p>배포할때 빼고 싶은 파일은 <code>MANIFEST.SKIP</code> 에 적어주고, <code>dist.ini</code> 로
build 하고 배포</p>

<p>좋은 플러그인이 많은데 나중되면 어케 쓰는지도 몰겟고 의존성문제로 인해
불편하기도 해서 그냥 자잘구레한 작업은 직접 손으로 하는걸로..</p>

<p><code>dist.ini</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ini'><span class='line'><span class="na">name</span> <span class="o">=</span> <span class="s">mymodule</span>
</span><span class='line'><span class="na">abstract</span> <span class="o">=</span> <span class="s">wat</span>
</span><span class='line'><span class="na">author</span> <span class="o">=</span> <span class="s">aanoaa &lt;wat@wat.wat&gt;</span>
</span><span class='line'><span class="na">license</span> <span class="o">=</span> <span class="s">Perl_5</span>
</span><span class='line'><span class="na">copyright_holder</span> <span class="o">=</span> <span class="s">aanoaa</span>
</span><span class='line'><span class="na">copyright_year</span> <span class="o">=</span> <span class="s">2014</span>
</span><span class='line'><span class="na">version</span> <span class="o">=</span> <span class="s">v0.0.1</span>
</span><span class='line'><span class="k">[@Basic]</span>
</span><span class='line'><span class="k">[PkgVersion]</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>MANIFEST.SKIP</code></p>

<pre><code># Makemaker generated files and dirs.
^MANIFEST\.
^Makefile$
^blib/

# version-control
^.git/
^.gitignore

^dist.ini
^README.md
</code></pre>

<p>이렇게 쓰고 있습니다.
제일 간단한 설정이라고 생각합니다.</p>

<p>전에는 dzil profile 같은 것도 만들고 그랬는데 이제는 그냥 예전거
복사해다 쓰고 그럽니다.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/12/shut-the-fuck-up-and-perltidy/">Shut the Fuck Up and Perltidy</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-12T17:07:08+09:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><code>$HOME/.perltidyrc</code></p>

<pre><code># https://github.com/kraih/mojo/blob/master/.perltidyrc
-pbp # Start with Perl Best Practices
-w # Show all warnings
-iob # Ignore old breakpoints
-l=79 # 79 characters per line
-mbl=2 # No more than 2 blank lines
-i=4 # Indentation is 4 columns
-ci=2 # Continuation indentation is 2 columns
-vt=0 # Less vertical tightness
-pt=2 # High parenthesis tightness
-bt=2 # High brace tightness
-sbt=2 # High square bracket tightness
-isbc # Don't indent comments without leading space
</code></pre>

<p>여기에 emacs 에다가
<a href="http://search.cpan.org/~jjore/perltidy-mode/">perltidy-mode.el</a> load
하고</p>

<pre><code>(eval-after-load "cperl-mode"
  '(add-hook 'cperl-mode-hook 'perltidy-mode))
</code></pre>

<p>하고 저장하면 저장할때마다 알아서 <code>perltidy</code> 되기 땜시 굳입니다
팀에서 통일해서 쓰면 좋겟습니다.</p>

<h3>SEE ALSO</h3>

<p><a href="http://aanoaa.github.io/blog/2012/09/12/tidyall/">tidyall</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/23/private-git-repo-with-dropbox/">Private Git Repo With Dropbox</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-23T18:18:35+09:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>개인적인 private repo 는 bitbucket 을 사용하고 있었는데, 아래 링크를
보고 Dropbox 를 사용하고 있습니다.</p>

<p><a href="http://mrdanadams.com/2011/github-free-private-git-repositories-dropbox/">Forget github limits: Free private git repositories with Dropbox</a></p>

<p>근데 아쉬운거는 github repo 에는 issue board 도 있어서 프로젝트별로
할일을 관리할 수 있어서 참 좋은데 그런 기능이 필요했습니다.</p>

<p>해서 둘러보던 차에 <a href="http://todotxt.com/">Todo.txt</a> CLI 를 사용해보고
있습니다.</p>

<pre><code># todo.cfg
export TODO_DIR=$HOME/Dropbox/todo/`basename $PWD`
alias t=todo.sh
</code></pre>

<p>요래해서 사용중입니다.</p>

<p>프로젝트 root 에서 밖에 사용못하고 이름 중복에 대응할 순 없지만 아주
만족합니다.</p>

<p><code>Dropbox</code>++, <code>Todo.txt</code>++</p>

<pre><code>$ cd ~/Desktop/t
$ t add '요래 조래'
1 요래 조래
TODO: 1 added.
~/Desktop/t $ t add '이러쿵 저러쿵'
2 이러쿵 저러쿵
TODO: 2 added.
~/Desktop/t $ t add '어쩌고 저쩌고'
3 어쩌고 저쩌고
TODO: 3 added.
~/Desktop/t $ t ls
3 어쩌고 저쩌고
1 요래 조래
2 이러쿵 저러쿵
--
TODO: 3 of 3 tasks shown
~/Desktop/t $ t do 3
3 x 2013-12-23 어쩌고 저쩌고
TODO: 3 marked as done.
x 2013-12-23 어쩌고 저쩌고
TODO: /home/hshong/Dropbox/todo/t/todo.txt archived.
~/Desktop/t $ t ls
1 요래 조래
2 이러쿵 저러쿵
--
TODO: 2 of 2 tasks shown
</code></pre>

<p>뭐 대략 이런느낌</p>

<p>Dropbox 에서 동기화 되기 땜시 다른 PC 로 옮겨서도 같은 프로젝트에서
같은 TODO list 를 관리할 수 있다는게 좋은 것 같습니다.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/20/coffeescript-compile-args/">Coffeescript-compile-args</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-20T00:34:00+09:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ coffee -h
</span><span class='line'>
</span><span class='line'>Usage: coffee [options] path/to/script.coffee -- [args]
</span><span class='line'>
</span><span class='line'>If called without options, `coffee` will run your script.
</span><span class='line'>
</span><span class='line'>  -b, --bare         compile without a top-level function wrapper
</span><span class='line'>  -c, --compile      compile to JavaScript and save as .js files
</span><span class='line'>  -e, --eval         pass a string from the command line as input
</span><span class='line'>  -h, --help         display this help message
</span><span class='line'>  -i, --interactive  run an interactive CoffeeScript REPL
</span><span class='line'>  -j, --join         concatenate the source CoffeeScript before compiling
</span><span class='line'>  -m, --map          generate source map and save as .map files
</span><span class='line'>  -n, --nodes        print out the parse tree that the parser produces
</span><span class='line'>      --nodejs       pass options directly to the "node" binary
</span><span class='line'>  -o, --output       set the output directory for compiled JavaScript
</span><span class='line'>  -p, --print        print out the compiled JavaScript
</span><span class='line'>  -s, --stdio        listen for and compile scripts over stdio
</span><span class='line'>  -l, --literate     treat stdio as literate style coffee-script
</span><span class='line'>  -t, --tokens       print out the tokens that the lexer/rewriter produce
</span><span class='line'>  -v, --version      display the version number
</span><span class='line'>  -w, --watch        watch scripts for changes and rerun commands</span></code></pre></td></tr></table></div></figure>


<p>javascript 는 html 의 script 로써만 사용하고 있습니다.
직접 사용하진 않고 <a href="http://coffeescript.org/">CoffeeScript</a> 를 쓰고
있습니다.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="nx">$</span> <span class="nx">coffee</span> <span class="o">-</span><span class="nx">cps</span>
</span><span class='line'><span class="nx">$</span> <span class="nf">-&gt;</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="s">&#39;oops&#39;</span>
</span><span class='line'><span class="o">&lt;</span><span class="nx">Ctrl</span><span class="o">+</span><span class="nx">d</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">//</span> <span class="nx">Generated</span> <span class="k">by</span> <span class="nx">CoffeeScript</span> <span class="mf">1.6</span><span class="p">.</span><span class="mi">3</span>
</span><span class='line'><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s">&#39;oops&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="p">}).</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>위 결과처럼 별 옵션없이 <code>--compile</code> 하면</p>

<pre><code>(function() { ... }).call(this)
</code></pre>

<p>무명함수로 감싼뒤에 실행합니다. lexical scope 이 자동으로 적용되어서
훌륭합니다만, 여러개의 파일을 하나의 html 에서 사용하고자 할때는 다른
파일에서 선언한 함수에 접근을 못하는 상황이 발생할 수 있습니다.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;jquery.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;a.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;b.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>a.js</code> 에 <code>foo</code> 라는 함수를 만들어 놓고 <code>b.js</code> 에서 사용하고자 하면
못찾습니다.</p>

<pre><code>ReferenceError: foo is not defined
</code></pre>

<p>이를 해결하는 방법은 3가지가 있습니다. (더 있을 수도..)</p>

<ol>
<li><p>requirejs 같은거 쓴다.</p>

<p><code>define</code>, <code>require</code> 으로 스슥</p></li>
<li><p>Window 이름공간을 더럽힌다.</p>

<p>브라우저의 전역적 이름공간인 <code>Window</code> 의 프로토타입에 함수를
추가해서 사용</p></li>
<li><p>무명함수를 벗긴다.</p>

<p><code>coffee</code> 명령어의 <code>--bare</code> 옵션인데, <code>compile without a top-level
function wrapper</code></p></li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="nx">$</span> <span class="nx">coffee</span> <span class="o">-</span><span class="nx">bcps</span>
</span><span class='line'><span class="nx">$</span> <span class="nf">-&gt;</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="s">&#39;oops&#39;</span>
</span><span class='line'><span class="o">&lt;</span><span class="nx">Ctrl</span><span class="o">+</span><span class="nx">d</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">//</span> <span class="nx">Generated</span> <span class="k">by</span> <span class="nx">CoffeeScript</span> <span class="mf">1.6</span><span class="p">.</span><span class="mi">3</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s">&#39;oops&#39;</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>  요래 하는 것입니다.</p>

<hr />

<p>emacs 사용자라면 어찌 매번 컴파일하는 번거로운 작업을 한단 말입니까.
<code>coffee-cos-mode</code>(coffee compile-on-save mode) 에 컴파일 옵션을
수정해둬야 하겠습니다.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="p">(</span><span class="nx">defun</span> <span class="nx">coffee</span><span class="o">-</span><span class="nx">custom</span> <span class="p">()</span>
</span><span class='line'>  <span class="s">&quot;coffee-mode-hook&quot;</span>
</span><span class='line'>  <span class="p">(</span><span class="nx">set</span> <span class="p">(</span><span class="nx">make</span><span class="o">-</span><span class="nx">local</span><span class="o">-</span><span class="nx">variable</span> <span class="s">&#39;tab-width) 2)</span>
</span><span class='line'><span class="s">  (setq coffee-args-compile &#39;</span><span class="p">(</span><span class="s">&quot;-bc&quot;</span><span class="p">))</span>
</span><span class='line'><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/10/p5-hubot-onto-heroku/">P5-hubot Onto Heroku</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-10T17:31:00+09:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>오리지날 <a href="https://github.com/github/hubot">hubot</a> 에는
<a href="https://www.heroku.com/">heroku</a> 어쩌고 저쩌고 하는 기능이 있습니다.</p>

<p>이제 <a href="https://github.com/aanoaa/p5-hubot">p5-hubot</a> 에서도 됩니다.</p>

<h3>OVERVIEW</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>cpanm Hubot                      <span class="c"># requires Hubot &gt;= 0.2.0</span>
</span><span class='line'><span class="nv">$ </span>hubot --create /path/to/hubot    <span class="c"># 배치가능한 형태의 패키지 저장소를 생성합니다</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /path/to/hubot
</span><span class='line'><span class="nv">$ </span>git init <span class="p">;</span> git add . <span class="p">;</span> git commit -m <span class="s2">&quot;init commit&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>heroku create --stack cedar --buildpack https://github.com/aanoaa/heroku-buildpack-perl.git
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>heroku config:add <span class="nv">HEROKU_URL</span><span class="o">=</span>http://your-herokuapp.herokuapp.com
</span><span class='line'><span class="nv">$ </span>heroku config:add <span class="nv">HUBOT_IRC_ROOMS</span><span class="o">=</span><span class="s1">&#39;#channel&#39;</span>
</span><span class='line'><span class="nv">$ </span>heroku config:add <span class="nv">HUBOT_IRC_SERVER</span><span class="o">=</span><span class="s1">&#39;irc.freenode.net&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>git push heroku master
</span></code></pre></td></tr></table></div></figure>


<p>가장 기본은 이렇습니다만, 확장 스크립트를 추가하시려면
<code>hubot-scripts.json</code> 파일에 적어주시고 그에 따른 모듈 의존성은
<code>cpanfile</code> 에 적어서 해결해야 합니다.</p>

<h3>CREATE A DEPLOYABLE HUBOT</h3>

<p><a href="http://search.cpan.org/">CPAN</a> 을 이용한다면,</p>

<pre><code>$ cpanm Hubot
$ hubot -c ~/Desktop/hubot
</code></pre>

<p>명령어로 deploy 저장소를 만들 수 있습니다.</p>

<pre><code>$ cd ~/Desktop/hubot/
~/Desktop/hubot $ find
.
./.gitignore
./cpanfile
./hubot-scripts.json
./bin
./bin/hubot
./README.md
./lib
./lib/Hubot
./lib/Hubot/EventEmitter.pm
./lib/Hubot/Scripts
./lib/Hubot/Scripts/help.pm
./lib/Hubot/Scripts/ascii.pm
./lib/Hubot/Scripts/shorten.pm
./lib/Hubot/Scripts/tweet.pm
./lib/Hubot/Scripts/roles.pm
./lib/Hubot/Response.pm
./lib/Hubot/Robot.pm
./lib/Hubot/User.pm
./lib/Hubot/Adapter.pm
./lib/Hubot/TextListener.pm
./lib/Hubot/Listener.pm
./lib/Hubot/Adapter
./lib/Hubot/Adapter/Irc.pm
./lib/Hubot/Adapter/Shell.pm
./lib/Hubot/Adapter/Campfire.pm
./lib/Hubot/Message.pm
./lib/Hubot/Brain.pm
./lib/Hubot/Creator.pm
./lib/Hubot.pm
./Procfile
</code></pre>

<p>이 디렉토리를 git 저장소로 만들고요, <code>heroku</code> tool 을 사용해서 heroku
에서 돌아갈 서비스 저장소로 만듭니다.</p>

<p><code>Procfile</code> 은 heroku 에서 사용하는 process 타입별로 실행 명령어를
담고 있는 어쩌고 저쩌고;;
<a href="https://devcenter.heroku.com/articles/procfile">Process Types and the Procfile</a></p>

<p><code>cpanfile</code> 은 모듈의존성을 해결하기 위해 꼭 필요합니다. 그렇지 않으면
아래와 비슷한 오류가 발생되면서 프로그램이 실행되지 않습니다.</p>

<pre><code>Can't locate xxx.pm in @INC (@INC contains: ~~~) at line 1.
</code></pre>

<p>나머지는 p5-hubot core 모듈입니다.(서비스엔 필요없는것도 잇지만..)</p>

<h3>CREATE A HEROKU INSTANCE?</h3>

<pre><code>$ heroku create --stack cedar --buildpack https://github.com/aanoaa/heroku-buildpack-perl.git
</code></pre>

<p><code>heroku</code> 라는 <code>remote</code> 를 등록하고 <code>BUILDPACK_URL</code> 설정변수를 추가하는
것 정도가 아닐까 추측 합니다.</p>

<p>BUILDPACK_URL 은 git 저장소인데,</p>

<ul>
<li><code>bin/detect</code></li>
<li><code>bin/compile</code></li>
<li><code>bin/release</code></li>
</ul>


<p>를 가지고 있습니다. 자세한 내용은
<a href="https://devcenter.heroku.com/articles/buildpacks#creating-a-buildpack">Creating a Buildpack</a>
을 참고하시고, 이부분의 매직은 <code>bin/compile</code> 이 수행될때 <code>cpanm</code> 을
이용해서 <code>./local</code> 에 의존모듈을 설치합니다. 그리고 실행할때에
<code>-Ilocal/perl5/lib</code> <code>PERL5LIB</code> 에 추가합니다. 풀어쓰면 아래와
같습니다.</p>

<pre><code>$ cpanm --quiet --notest -l $BUILD_DIR/local --installdeps .
</code></pre>

<p><a href="https://twitter.com/miyagawa">@miyagawa</a>++ 입니다.</p>

<p>그리고 heroku 에 push 하면 알아서 돌아갑니다(별일 없으면..)</p>

<h3>SEE ALSO</h3>

<ul>
<li><a href="https://github.com/github/hubot/wiki/Deploying-Hubot-onto-Heroku">Deploying Hubot onto Heroku</a></li>
<li><a href="https://github.com/aanoaa/heroku-buildpack-perl">heroku-buildpack-perl for Perl/hubot</a></li>
<li><a href="https://devcenter.heroku.com/articles/procfile">Process Types and the Procfile</a></li>
</ul>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/04/26/hangeuli-doeneunga/">한글이 되는가</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/06/08/yongbin-mode/">Yongbin-mode</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/15/redis-path-and-db-number/">Redis Path and Db Number</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/15/perltidy-profile-option/">Perltidy Profile Option</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/14/octopress-3-dot-0/">Octopress 3.0</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/aanoaa">@aanoaa</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'aanoaa',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Hyungsuk Hong -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'aanoaa-mustache';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
